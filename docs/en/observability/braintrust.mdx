---
title: Braintrust Integration
description: Learn how to integrate Braintrust with CrewAI for comprehensive tracing and evaluation
icon: brain
mode: "wide"
---

# Braintrust Overview

[Braintrust](https://www.braintrust.dev/) is a comprehensive platform for building, evaluating, and monitoring AI applications. It provides end-to-end observability for your CrewAI agents with automatic tracing, evaluation tools, and performance analytics.

Braintrust offers comprehensive support for every stage of your CrewAI application development:

- **Automatic Tracing**: Capture detailed execution traces of your agents, tasks, and LLM calls
- **Evaluation & Testing**: Systematically evaluate agent performance with custom or pre-built metrics
- **Performance Monitoring**: Track latency, costs, and quality metrics in production
- **Prompt Management**: Version and optimize prompts with A/B testing capabilities
- **Dataset Management**: Build and manage evaluation datasets from production traces

## Setup Instructions

<Steps>
    <Step title="Install required packages">
      ```bash
      pip install crewai braintrust
      ```
    </Step>
    
    <Step title="Set up Braintrust Account">
      Sign up for a [Braintrust account](https://www.braintrust.dev/) if you haven't already. You'll need your API key to authenticate.
    </Step>
    
    <Step title="Set Environment Variables">
      Configure your Braintrust API key and other necessary credentials:

      ```python
      import os

      # Set your Braintrust API key
      os.environ["BRAINTRUST_API_KEY"] = "your-braintrust-api-key"
      
      # Set your LLM provider API key (e.g., OpenAI)
      os.environ["OPENAI_API_KEY"] = "your-openai-api-key"
      ```
    </Step>
    
    <Step title="Wrap Your CrewAI Application">
      Braintrust provides a simple decorator to automatically trace your CrewAI workflows:

      ```python
      import braintrust
      from crewai import Agent, Task, Crew, LLM, Process

      # Initialize Braintrust
      braintrust.init(project="crewai-demo")

      # Wrap your crew execution with Braintrust tracing
      @braintrust.traced
      def run_crew():
          # Create an LLM instance
          llm = LLM(model="gpt-4o", temperature=0)

          # Create agents
          researcher = Agent(
              role='Research Analyst',
              goal='Conduct comprehensive research on given topics',
              backstory='Expert researcher with attention to detail',
              llm=llm,
              verbose=True
          )

          writer = Agent(
              role='Content Writer',
              goal='Create engaging content based on research',
              backstory='Experienced writer skilled at making complex topics accessible',
              llm=llm,
              verbose=True
          )

          # Create tasks
          research_task = Task(
              description='Research the latest developments in {topic}',
              expected_output='Comprehensive research summary with key findings',
              agent=researcher
          )

          writing_task = Task(
              description='Write an article based on the research findings',
              expected_output='Well-structured article that is informative and engaging',
              agent=writer,
              context=[research_task]
          )

          # Create and run crew
          crew = Crew(
              agents=[researcher, writer],
              tasks=[research_task, writing_task],
              verbose=True,
              process=Process.sequential
          )

          result = crew.kickoff(inputs={"topic": "artificial intelligence in healthcare"})
          return result

      # Execute the crew
      result = run_crew()
      print(result)
      ```
    </Step>
    
    <Step title="Alternative: Manual Logging">
      For more control, you can manually log traces to Braintrust:

      ```python
      import braintrust
      from crewai import Agent, Task, Crew, LLM

      # Initialize Braintrust logger
      logger = braintrust.init_logger(project="crewai-demo")

      # Create your CrewAI setup
      llm = LLM(model="gpt-4o", temperature=0)
      
      researcher = Agent(
          role='Research Analyst',
          goal='Find insights on market trends',
          backstory='Experienced market analyst',
          llm=llm,
          verbose=True
      )

      task = Task(
          description='Analyze market trends for {industry}',
          expected_output='Market analysis report with key trends',
          agent=researcher
      )

      crew = Crew(
          agents=[researcher],
          tasks=[task],
          verbose=True
      )

      # Log the execution
      with logger.start_span(name="crew_execution") as span:
          result = crew.kickoff(inputs={"industry": "renewable energy"})
          span.log(
              input={"industry": "renewable energy"},
              output=str(result),
              metadata={"agent_count": len(crew.agents)}
          )

      print(result)
      ```
    </Step>
    
    <Step title="View Traces in Braintrust">
      After running your CrewAI application, visit the [Braintrust dashboard](https://www.braintrust.dev/) to view:
      
      - Complete execution traces with timing information
      - LLM calls with prompts, completions, and token usage
      - Agent interactions and task execution flow
      - Performance metrics including latency and costs
      - Error tracking and debugging information

      <Frame caption="Braintrust Tracing Dashboard">
        <img src="/images/braintrust-crewai-trace.png" alt="Example trace in Braintrust showing CrewAI agent interactions" />
      </Frame>
      
      _Note: A screenshot showing an example trace will be added here._
    </Step>
</Steps>

## Key Features

### Comprehensive Tracing
- **Automatic Instrumentation**: Braintrust automatically captures all CrewAI operations including agent interactions, task executions, and LLM calls
- **Nested Spans**: Visualize the complete execution hierarchy from crew kickoff to individual LLM calls
- **Metadata Tracking**: Capture custom metadata, inputs, and outputs for each operation

### Evaluation & Quality Assurance
- **Custom Metrics**: Define and track custom evaluation metrics for your agents
- **Regression Testing**: Ensure new changes don't degrade performance
- **Dataset Management**: Build evaluation datasets from production traces
- **Scoring Functions**: Use built-in or custom scoring functions to assess output quality

### Production Monitoring
- **Real-time Dashboards**: Monitor agent performance in production
- **Cost Tracking**: Track LLM API costs across all your crews
- **Latency Monitoring**: Identify performance bottlenecks
- **Error Alerting**: Get notified when issues occur

### Prompt Management
- **Version Control**: Track and compare different prompt versions
- **A/B Testing**: Test prompt variations to optimize performance
- **Rollback**: Quickly revert to previous prompt versions if needed

## Best Practices

### Development
- Use Braintrust tracing from day one to build a historical record
- Tag traces with version information for easier tracking
- Create evaluation datasets early in development
- Set up automated evaluations for continuous quality monitoring

### Production
- Monitor key metrics like latency, cost, and quality scores
- Set up alerts for anomalies or degraded performance
- Use production traces to continually improve evaluation datasets
- Implement gradual rollouts with A/B testing

### Optimization
- Analyze trace data to identify slow operations
- Compare different agent configurations using evaluation metrics
- Use prompt versioning to iterate on agent instructions
- Track token usage to optimize costs

## Version Compatibility
- Python 3.8+
- CrewAI >= 0.86.0
- Braintrust >= 0.0.1

## Resources

- [Braintrust Documentation](https://www.braintrust.dev/docs) - Complete platform documentation
- [CrewAI Integration Guide](https://www.braintrust.dev/docs/integrations/crew-ai) - Official integration guide
- [Braintrust Python SDK](https://www.braintrust.dev/docs/reference/python) - SDK reference documentation
- [CrewAI Documentation](https://docs.crewai.com/) - CrewAI framework overview

## Support

For questions or issues with the Braintrust integration:
- [Braintrust Community Slack](https://www.braintrust.dev/community)
- [GitHub Discussions](https://github.com/braintrustdata/braintrust-sdk)
- [Documentation](https://www.braintrust.dev/docs)
